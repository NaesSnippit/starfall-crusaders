<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <title>Starfall Crusaders - Characters</title>
  <style>
    body {
      font-family: 'Share Tech Mono', monospace;
    }
  </style>
</head>
<body>
  <header>
    <h1>
      <img src="images/StarfallLogoFullHoriz.png" height="100" alt="Starfall Logo"/>
    </h1>
    <nav>
      <ul>
        <li><a href="index.html" class="nav-link">Home</a></li>
        <li><a href="demo.html" class="nav-link">Game Demo</a></li>
        <li><a href="fanart.html" class="nav-link">Fanart</a></li>
        <li><a href="trivia.html" class="nav-link">Characters</a></li>
        <li><a href="soundtrack.html" class="nav-link">Soundtrack</a></li>
        <li><a href="https://www.tumblr.com/projectstarfallcrusaders/" class="nav-link">Tumblr</a></li>
        <li><a href="https://twitter.com/StarfallCSaders" class="nav-link">Twitter</a></li>
        <li><a href="https://www.youtube.com/@projectstarfallcrusaders" class="nav-link">YouTube</a></li>
      </ul>
    </nav>
  </header>

  <br/>

  <section id="main-content">
    <h2>Characters</h2>
    <ul>
      <li><a href="#" data-normal="charles.html" data-rare="diamond.html"><img src="images/charicons/charles.png" height="100" alt="Charles" /></a></li>
      <li><a href="#" data-normal="firefly.html" data-rare="errorpage.html"><img src="images/charicons/firefly.png" height="100" alt="Firefly" /></a></li>
      <li><a href="#" data-normal="stellar.html" data-rare1="burned.html" data-rare2="fischer.html"><img src="images/charicons/stellar.png" height="100" alt="Stellar" /></a></li>
      <li><a href="#" data-normal="percy.html" data-rare="gaoyama.html"><img src="images/charicons/percy.png" height="100" alt="Percy" /></a></li>
      <li><a href="#" data-normal="ted.html" data-rare="nbj.html"><img src="images/charicons/ted.png" height="100" alt="Ted" /></a></li>
    </ul>
  </section>

  <footer>
    <p>&copy; 2025 Starfall Crusaders. All rights reserved. Made with Love.</p>
  </footer>

  <script>
    const clickCounts = {};

    document.querySelectorAll('#main-content a').forEach(link => {
      const charKey = link.querySelector('img').alt;
      clickCounts[charKey] = 0;

      link.addEventListener('click', function (event) {
        event.preventDefault();

        clickCounts[charKey]++;
        const count = clickCounts[charKey];
        const baseChance = 0.01;
        const chance = Math.min(baseChance + count * 0.005, 0.10); // Max 10%

        const rand = Math.random();

        const rare1 = link.getAttribute('data-rare1');
        const rare2 = link.getAttribute('data-rare2');
        const rare = link.getAttribute('data-rare');
        const normal = link.getAttribute('data-normal');

        // Handle multiple rare paths (e.g., Stellar)
        if (rare1 && rare2) {
          if (rand < chance) {
            window.location.href = Math.random() < 0.7 ? rare1 : rare2;
          } else {
            window.location.href = normal;
          }
        }
        // Handle single rare path
        else if (rare) {
          if (rand < chance) {
            window.location.href = rare;
          } else {
            window.location.href = normal;
          }
        }
        // Fallback
        else {
          window.location.href = normal;
        }
      });
    });
  </script>
</body>
</html>
